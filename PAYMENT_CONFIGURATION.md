# ‚öôÔ∏è PAYMENT SYSTEM - CONFIGURATION REFERENCE\n\n## üîë RAZORPAY KEYS\n\n### Test Keys (Current)\n```\nKey ID: rzp_test_RrudoJsyYr2V2b\nSecret: QvbG305OwIfKv1CHD61f8C2L\nMode: TEST\n```\n\n### Production Keys (Update Before Deploy)\n```\nKey ID: rzp_live_XXXXXXXXXXXXXXXX\nSecret: XXXXXXXXXXXXXXXXXXXXXXXX\nMode: LIVE\n```\n\n---\n\n## üìã APPLICATION.PROPERTIES\n\n### Payment Configuration\n```properties\n# Payment Mode\napp.payment.mock=false\n\n# Razorpay Keys\napp.razorpay.keyId=rzp_test_RrudoJsyYr2V2b\napp.razorpay.keySecret=QvbG305OwIfKv1CHD61f8C2L\n\n# Bundle Amount (in paise)\napp.bundle.amountPaise=49900  # ‚Çπ499\n\n# Unlocked Video URL\napp.links.unlockedVideo=https://your-video-url.com\n```\n\n### Access Control\n```properties\n# Allowed Email\napp.access.allowedEmail=\n\n# Allowed User ID\napp.access.allowedUserId=U1001\n\n# Allowed Password\napp.access.allowedPassword=\n```\n\n### Notifications\n```properties\n# Email\napp.mail.enabled=false\napp.mail.from=businessaswin@gmail.com\napp.mail.admin=businessaswin@gmail.com\n\n# WhatsApp\napp.whatsapp.enabled=false\napp.notify.adminWhatsapp=+918825602356\n```\n\n### Database\n```properties\n# H2 (Development)\nspring.datasource.url=jdbc:h2:mem:asdance\nspring.datasource.driverClassName=org.h2.Driver\n\n# MySQL (Production)\nspring.datasource.url=jdbc:mysql://localhost:3306/asdance\nspring.datasource.driverClassName=com.mysql.cj.jdbc.Driver\nspring.datasource.username=root\nspring.datasource.password=password\n```\n\n---\n\n## üóÑÔ∏è DATABASE SCHEMA\n\n### Users Table\n```sql\nCREATE TABLE users (\n  id BIGINT PRIMARY KEY AUTO_INCREMENT,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  password_hash VARCHAR(255) NOT NULL,\n  full_name VARCHAR(255) NOT NULL,\n  external_id VARCHAR(255),\n  has_access BOOLEAN DEFAULT FALSE,\n  enabled BOOLEAN DEFAULT TRUE\n);\n```\n\n### Purchases Table\n```sql\nCREATE TABLE purchases (\n  id BIGINT PRIMARY KEY AUTO_INCREMENT,\n  user_id BIGINT NOT NULL,\n  status VARCHAR(50) NOT NULL,\n  external_user_id VARCHAR(255),\n  razorpay_order_id VARCHAR(255),\n  razorpay_payment_id VARCHAR(255),\n  amount_paise INT NOT NULL,\n  created_at TIMESTAMP NOT NULL,\n  paid_at TIMESTAMP,\n  downloaded_at TIMESTAMP,\n  notified_at TIMESTAMP,\n  buyer_name VARCHAR(255),\n  buyer_email VARCHAR(255),\n  buyer_phone VARCHAR(20),\n  FOREIGN KEY (user_id) REFERENCES users(id)\n);\n```\n\n---\n\n## üîÑ PAYMENT STATUS FLOW\n\n```\nCREATED\n  ‚Üì\nPAID (after Razorpay payment)\n  ‚Üì\nSUCCESS (after signature verification)\n  ‚Üì\nUser Access Unlocked\n```\n\n---\n\n## üß™ TEST CARDS\n\n### Successful Payment\n```\nCard: 4111 1111 1111 1111\nExpiry: 12/25 (any future date)\nCVV: 123\nOTP: 123456\n```\n\n### Failed Payment\n```\nCard: 4000 0000 0000 0002\nExpiry: 12/25\nCVV: 123\nOTP: 123456\n```\n\n### International Card\n```\nCard: 4012 8888 8888 1881\nExpiry: 12/25\nCVV: 123\nOTP: 123456\n```\n\n---\n\n## üîê SECURITY SETTINGS\n\n### CORS Configuration\n```properties\napp.cors.allowedOriginPatterns=http://localhost:*,http://127.0.0.1:*,https://yourdomain.com\n```\n\n### JWT Configuration\n```properties\napp.jwt.secret=${APP_JWT_SECRET:your-secret-key}\napp.jwt.issuer=as-dance\napp.jwt.expMinutes=43200\n```\n\n### SSL/TLS (Production)\n```properties\nserver.ssl.key-store=classpath:keystore.p12\nserver.ssl.key-store-password=password\nserver.ssl.key-store-type=PKCS12\n```\n\n---\n\n## üìß EMAIL CONFIGURATION\n\n### SMTP Settings\n```properties\nspring.mail.host=smtp.gmail.com\nspring.mail.port=587\nspring.mail.username=your-email@gmail.com\nspring.mail.password=your-app-password\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true\nspring.mail.properties.mail.smtp.starttls.required=true\n```\n\n---\n\n## üì± WHATSAPP CONFIGURATION\n\n### Meta (Facebook) WhatsApp\n```properties\napp.whatsapp.provider=meta\napp.whatsapp.metaToken=your-meta-token\napp.whatsapp.metaPhoneNumberId=your-phone-number-id\napp.whatsapp.metaApiBase=https://graph.facebook.com/v19.0\n```\n\n### Gupshup WhatsApp\n```properties\napp.whatsapp.provider=gupshup\napp.whatsapp.gupshupApiKey=your-api-key\napp.whatsapp.gupshupAppName=your-app-name\napp.whatsapp.gupshupUrl=https://api.gupshup.io/sm/api/v1/msg\n```\n\n---\n\n## üöÄ ENVIRONMENT VARIABLES\n\n### Development\n```bash\nexport APP_JWT_SECRET=\"dev-secret-key\"\nexport RAZORPAY_KEY_ID=\"rzp_test_RrudoJsyYr2V2b\"\nexport RAZORPAY_KEY_SECRET=\"QvbG305OwIfKv1CHD61f8C2L\"\nexport SPRING_PROFILES_ACTIVE=\"dev\"\n```\n\n### Production\n```bash\nexport APP_JWT_SECRET=\"prod-secret-key-very-long\"\nexport RAZORPAY_KEY_ID=\"rzp_live_XXXXXXXXXXXXXXXX\"\nexport RAZORPAY_KEY_SECRET=\"XXXXXXXXXXXXXXXXXXXXXXXX\"\nexport SPRING_PROFILES_ACTIVE=\"prod\"\nexport APP_ALLOWED_EMAIL=\"allowed@example.com\"\n```\n\n---\n\n## üìä MONITORING & LOGGING\n\n### Log Levels\n```properties\nlogging.level.root=INFO\nlogging.level.com.asdance=DEBUG\nlogging.level.org.springframework.web=DEBUG\nlogging.level.org.hibernate.SQL=DEBUG\n```\n\n### Log File\n```properties\nlogging.file.name=app.log\nlogging.file.max-size=10MB\nlogging.file.max-history=10\n```\n\n---\n\n## ‚úÖ DEPLOYMENT CHECKLIST\n\n- [ ] Update Razorpay production keys\n- [ ] Update JWT secret\n- [ ] Configure database (MySQL)\n- [ ] Enable email notifications\n- [ ] Enable WhatsApp notifications\n- [ ] Set up SSL certificate\n- [ ] Configure CORS for production domain\n- [ ] Set allowed email list\n- [ ] Configure backup strategy\n- [ ] Set up monitoring\n- [ ] Test payment flow\n- [ ] Test refund process\n- [ ] Configure payment webhooks\n- [ ] Set up error logging\n- [ ] Test with real payment\n\n---\n\n**Last Updated**: 2024\n**Version**: 1.0.0\n