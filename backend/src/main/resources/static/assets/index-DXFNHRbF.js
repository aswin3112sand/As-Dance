const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DwfvGApP.js","assets/vendor-BptZdHlD.js","assets/icons-CGmjxQ5q.js","assets/motion-Bf-FllcE.js","assets/Login-BapuR9cd.js","assets/Register-D2agvO9b.js","assets/Checkout-C_fmBtbC.js","assets/paymentStorage-CYG686oq.js","assets/Checkout-CyrINe_c.css","assets/PaymentSuccess-mT-H0LM9.js","assets/PaymentFailed-BRt-XHQP.js","assets/Dashboard-B3NjjdcP.js","assets/Admin-BDdS2AVy.js","assets/Preview-CZUJEAyL.js","assets/NotFound-N_Hmwekj.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,R as n,B as r,a as s,b as o,u as a,N as i,c}from"./vendor-BptZdHlD.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l={},d=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in l)return;l[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};const u=()=>{"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}),"caches"in window&&caches.open("as-dance-v1").catch(()=>{})};function h(e,t={}){const n=e.startsWith("/")?e:`/${e}`,r={credentials:"include",...t},s=(r.method||"GET").toUpperCase();if(!["GET","HEAD","OPTIONS","TRACE"].includes(s)){const e=function(e){const t=document.cookie.match(new RegExp(`(?:^|; )${e}=([^;]*)`));return t?decodeURIComponent(t[1]):""}("XSRF-TOKEN");e&&(r.headers={...r.headers||{},"X-XSRF-TOKEN":e})}return fetch(n,r)}"undefined"!=typeof window&&("requestIdleCallback"in window?window.requestIdleCallback(u,{timeout:2e3}):window.setTimeout(u,0));const m=e.createContext(null);function p({children:n}){const[r,s]=e.useState(!0),[o,a]=e.useState(null);async function i(){try{const e=await h("/api/auth/me");if(!e.ok)throw new Error("not authed");const t=await e.json();a(t)}catch{a(null)}finally{s(!1)}}async function c(e,t){const n=await h("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json().catch(()=>({}));if(!n.ok||!1===r.ok)throw new Error(r.message||"Login failed");a(r)}async function l(e,t,n){const r=await h("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e,email:t,password:n})}),s=await r.json().catch(()=>({}));if(!r.ok||!1===s.ok)throw new Error(s.message||"Register failed")}async function d(){await h("/api/auth/logout",{method:"POST"}),await i()}e.useEffect(()=>{i()},[]);const u=e.useMemo(()=>({loading:r,user:o,login:c,register:l,logout:d,refresh:i}),[r,o]);return t.jsx(m.Provider,{value:u,children:n})}function f(){return e.useContext(m)}const j=()=>t.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),x=n.lazy(()=>d(()=>import("./Home-DwfvGApP.js"),__vite__mapDeps([0,1,2,3]))),_=n.lazy(()=>d(()=>import("./Login-BapuR9cd.js"),__vite__mapDeps([4,1,3]))),y=n.lazy(()=>d(()=>import("./Register-D2agvO9b.js"),__vite__mapDeps([5,1,3]))),E=n.lazy(()=>d(()=>import("./Checkout-C_fmBtbC.js"),__vite__mapDeps([6,1,2,7,8]))),g=n.lazy(()=>d(()=>import("./PaymentSuccess-mT-H0LM9.js"),__vite__mapDeps([9,1,7]))),w=n.lazy(()=>d(()=>import("./PaymentFailed-BRt-XHQP.js"),__vite__mapDeps([10,1,7]))),v=n.lazy(()=>d(()=>import("./Dashboard-B3NjjdcP.js"),__vite__mapDeps([11,1]))),P=n.lazy(()=>d(()=>import("./Admin-BDdS2AVy.js"),__vite__mapDeps([12,1]))),O=n.lazy(()=>d(()=>import("./Preview-CZUJEAyL.js"),__vite__mapDeps([13,1]))),b=n.lazy(()=>d(()=>import("./NotFound-N_Hmwekj.js"),__vite__mapDeps([14,1])));function T({children:e}){const{loading:n,user:r}=f(),s=a(),o=`${s.pathname}${s.search||""}`;return n?t.jsx("div",{className:"page-center text-white-50",children:"Loading..."}):r?e:t.jsx(i,{to:"/login",replace:!0,state:{from:o}})}function L(){return t.jsx(x,{})}function k(){const t=a();return e.useEffect(()=>{const e=Array.from(document.querySelectorAll(".reveal"));if(!e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("is-in"));const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-in"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -10% 0px"});return e.forEach(e=>t.observe(e)),()=>t.disconnect()},[t.pathname]),null}function S(){return t.jsx(p,{children:t.jsxs(r,{children:[t.jsx("a",{className:"skip-link",href:"#main-content",children:"Skip to content"}),t.jsx(k,{}),t.jsx("main",{id:"main-content",role:"main",tabIndex:"-1",children:t.jsx(e.Suspense,{fallback:t.jsx(j,{}),children:t.jsxs(s,{children:[t.jsx(o,{path:"/",element:t.jsx(L,{})}),t.jsx(o,{path:"/home",element:t.jsx(x,{})}),t.jsx(o,{path:"/dance",element:t.jsx(x,{})}),t.jsx(o,{path:"/preview",element:t.jsx(O,{})}),t.jsx(o,{path:"/login",element:t.jsx(_,{})}),t.jsx(o,{path:"/register",element:t.jsx(y,{})}),t.jsx(o,{path:"/checkout",element:t.jsx(T,{children:t.jsx(E,{})})}),t.jsx(o,{path:"/payment-success",element:t.jsx(T,{children:t.jsx(g,{})})}),t.jsx(o,{path:"/payment-failed",element:t.jsx(T,{children:t.jsx(w,{})})}),t.jsx(o,{path:"/dashboard",element:t.jsx(T,{children:t.jsx(v,{})})}),t.jsx(o,{path:"/admin",element:t.jsx(P,{})}),t.jsx(o,{path:"*",element:t.jsx(b,{})})]})})})]})})}c.createRoot(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(S,{})}));export{d as _,h as a,f as u};
