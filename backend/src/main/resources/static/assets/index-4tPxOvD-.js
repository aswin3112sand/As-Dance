const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-C4Cp2OH-.js","assets/vendor-DsWLKMGy.js","assets/ui-libs-9Vr8ha5v.js","assets/icons-Cclj7sW5.js","assets/motion-Bf-FllcE.js","assets/Login-CMW8pi7L.js","assets/Register-DH8t_GCH.js","assets/Checkout-Clv0xhVy.js","assets/paymentStorage-CYG686oq.js","assets/Checkout-CyrINe_c.css","assets/PaymentSuccess-DPxKPo--.js","assets/PaymentFailed-BqiAqahg.js","assets/Dashboard-KZeXM0Lf.js","assets/Admin-7bLCL8Vr.js","assets/Preview-BkjKv4bz.js","assets/NotFound-Cul8q-Rj.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,R as n,B as s,a as r,b as o,u as i,N as a,c}from"./vendor-DsWLKMGy.js";import"./ui-libs-9Vr8ha5v.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l={},d=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in l)return;l[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};const u=()=>{"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}),"caches"in window&&caches.open("as-dance-v1").catch(()=>{})};function h(e,t={}){const n=e.startsWith("/")?e:`/${e}`,s={credentials:"include",...t},r=(s.method||"GET").toUpperCase();if(!["GET","HEAD","OPTIONS","TRACE"].includes(r)){const e=function(e){const t=document.cookie.match(new RegExp(`(?:^|; )${e}=([^;]*)`));return t?decodeURIComponent(t[1]):""}("XSRF-TOKEN");e&&(s.headers={...s.headers||{},"X-XSRF-TOKEN":e})}return fetch(n,s)}"undefined"!=typeof window&&("requestIdleCallback"in window?window.requestIdleCallback(u,{timeout:2e3}):window.setTimeout(u,0));const m=e.createContext(null);function p({children:n}){const[s,r]=e.useState(!0),[o,i]=e.useState(null);async function a(){try{const e=await h("/api/auth/me");if(!e.ok)throw new Error("not authed");const t=await e.json();i(t)}catch{i(null)}finally{r(!1)}}async function c(e,t){const n=await h("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),s=await n.json().catch(()=>({}));if(!n.ok||!1===s.ok)throw new Error(s.message||"Login failed");i(s)}async function l(e,t,n){const s=await h("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e,email:t,password:n})}),r=await s.json().catch(()=>({}));if(!s.ok||!1===r.ok)throw new Error(r.message||"Register failed")}async function d(){await h("/api/auth/logout",{method:"POST"}),await a()}e.useEffect(()=>{a()},[]);const u=e.useMemo(()=>({loading:s,user:o,login:c,register:l,logout:d,refresh:a}),[s,o]);return t.jsx(m.Provider,{value:u,children:n})}function f(){return e.useContext(m)}const j=()=>t.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),x=n.lazy(()=>d(()=>import("./Home-C4Cp2OH-.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4]))),_=n.lazy(()=>d(()=>import("./Login-CMW8pi7L.js"),__vite__mapDeps([5,1,2,4]))),y=n.lazy(()=>d(()=>import("./Register-DH8t_GCH.js"),__vite__mapDeps([6,1,2,4]))),E=n.lazy(()=>d(()=>import("./Checkout-Clv0xhVy.js"),__vite__mapDeps([7,1,2,3,8,9]))),g=n.lazy(()=>d(()=>import("./PaymentSuccess-DPxKPo--.js"),__vite__mapDeps([10,1,2,8]))),w=n.lazy(()=>d(()=>import("./PaymentFailed-BqiAqahg.js"),__vite__mapDeps([11,1,2,8]))),v=n.lazy(()=>d(()=>import("./Dashboard-KZeXM0Lf.js"),__vite__mapDeps([12,1,2]))),P=n.lazy(()=>d(()=>import("./Admin-7bLCL8Vr.js"),__vite__mapDeps([13,1,2]))),b=n.lazy(()=>d(()=>import("./Preview-BkjKv4bz.js"),__vite__mapDeps([14,1,2]))),O=n.lazy(()=>d(()=>import("./NotFound-Cul8q-Rj.js"),__vite__mapDeps([15,1,2])));function T({children:e}){const{loading:n,user:s}=f(),r=i(),o=`${r.pathname}${r.search||""}`;return n?t.jsx("div",{className:"page-center text-white-50",children:"Loading..."}):s?e:t.jsx(a,{to:"/login",replace:!0,state:{from:o}})}function L(){return t.jsx(x,{})}function k(){const t=i();return e.useEffect(()=>{const e=Array.from(document.querySelectorAll(".reveal"));if(!e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("is-in"));const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-in"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -10% 0px"});return e.forEach(e=>t.observe(e)),()=>t.disconnect()},[t.pathname]),null}function S(){return t.jsx(p,{children:t.jsxs(s,{children:[t.jsx("a",{className:"skip-link",href:"#main-content",children:"Skip to content"}),t.jsx(k,{}),t.jsx("main",{id:"main-content",role:"main",tabIndex:"-1",children:t.jsx(e.Suspense,{fallback:t.jsx(j,{}),children:t.jsxs(r,{children:[t.jsx(o,{path:"/",element:t.jsx(L,{})}),t.jsx(o,{path:"/home",element:t.jsx(x,{})}),t.jsx(o,{path:"/dance",element:t.jsx(x,{})}),t.jsx(o,{path:"/preview",element:t.jsx(b,{})}),t.jsx(o,{path:"/login",element:t.jsx(_,{})}),t.jsx(o,{path:"/register",element:t.jsx(y,{})}),t.jsx(o,{path:"/checkout",element:t.jsx(T,{children:t.jsx(E,{})})}),t.jsx(o,{path:"/payment-success",element:t.jsx(T,{children:t.jsx(g,{})})}),t.jsx(o,{path:"/payment-failed",element:t.jsx(T,{children:t.jsx(w,{})})}),t.jsx(o,{path:"/dashboard",element:t.jsx(T,{children:t.jsx(v,{})})}),t.jsx(o,{path:"/admin",element:t.jsx(P,{})}),t.jsx(o,{path:"*",element:t.jsx(O,{})})]})})})]})})}c.createRoot(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(S,{})}));export{d as _,h as a,f as u};
