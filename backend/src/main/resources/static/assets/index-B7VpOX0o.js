const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-y9sFVgl2.js","assets/vendor-CYIUVSsn.js","assets/ui-libs-CrvD3He2.js","assets/ui-libs-CfkJyshZ.css","assets/icons-BxXoZdfl.js","assets/Login-CWNRq8jy.js","assets/Register-C5UZXV-u.js","assets/Checkout-DahgI6_j.js","assets/paymentStorage-DeWr5p_q.js","assets/PaymentSuccess-DyoEf3PO.js","assets/PaymentFailed-D0XLSMeC.js","assets/Dashboard-DjIgHx5O.js","assets/Admin-C3UsA94l.js","assets/Preview-DsxUDyQ3.js","assets/NotFound-BjirMkDS.js"])))=>i.map(i=>d[i]);
import{r as x,j as e,R as d,B as R,a as O,b as c,u as L,N as T,c as A}from"./vendor-CYIUVSsn.js";import"./ui-libs-CrvD3He2.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function l(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(t){if(t.ep)return;t.ep=!0;const n=l(t);fetch(t.href,n)}})();const S="modulepreload",b=function(s){return"/"+s},w={},m=function(o,l,i){let t=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),u=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));t=Promise.allSettled(l.map(h=>{if(h=b(h),h in w)return;w[h]=!0;const _=h.endsWith(".css"),f=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const a=document.createElement("link");if(a.rel=_?"stylesheet":S,_||(a.as="script"),a.crossOrigin="",a.href=h,u&&a.setAttribute("nonce",u),document.head.appendChild(a),_)return new Promise((j,p)=>{a.addEventListener("load",j),a.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(r){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=r,window.dispatchEvent(u),!u.defaultPrevented)throw r}return t.then(r=>{for(const u of r||[])u.status==="rejected"&&n(u.reason);return o().catch(n)})};function C(s){const o=document.cookie.match(new RegExp(`(?:^|; )${s}=([^;]*)`));return o?decodeURIComponent(o[1]):""}function I(){"caches"in window&&caches.keys().then(s=>{s.forEach(o=>{caches.delete(o)})})}function N(){"caches"in window&&caches.open("as-dance-v1").catch(()=>{})}I();N();function y(s,o={}){const l=s.startsWith("/")?s:`/${s}`,i={credentials:"include",...o},t=(i.method||"GET").toUpperCase();if(!["GET","HEAD","OPTIONS","TRACE"].includes(t)){const n=C("XSRF-TOKEN");n&&(i.headers={...i.headers||{},"X-XSRF-TOKEN":n})}return fetch(l,i)}const P=x.createContext(null);function k({children:s}){const[o,l]=x.useState(!0),[i,t]=x.useState(null);async function n(){try{const f=await y("/api/auth/me");if(!f.ok)throw new Error("not authed");const a=await f.json();t(a)}catch{t(null)}finally{l(!1)}}x.useEffect(()=>{n()},[]);async function r(f,a){const j=await y("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:a})}),p=await j.json().catch(()=>({}));if(!j.ok||p.ok===!1)throw new Error(p.message||"Login failed");t(p)}async function u(f,a,j){const p=await y("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:f,email:a,password:j})}),v=await p.json().catch(()=>({}));if(!p.ok||v.ok===!1)throw new Error(v.message||"Register failed")}async function h(){await y("/api/auth/logout",{method:"POST"}),await n()}const _=x.useMemo(()=>({loading:o,user:i,login:r,register:u,logout:h,refresh:n}),[o,i]);return e.jsx(P.Provider,{value:_,children:s})}function D(){return x.useContext(P)}const z=()=>e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),g=d.lazy(()=>m(()=>import("./Home-y9sFVgl2.js"),__vite__mapDeps([0,1,2,3,4]))),V=d.lazy(()=>m(()=>import("./Login-CWNRq8jy.js"),__vite__mapDeps([5,1,2,3]))),U=d.lazy(()=>m(()=>import("./Register-C5UZXV-u.js"),__vite__mapDeps([6,1,2,3]))),$=d.lazy(()=>m(()=>import("./Checkout-DahgI6_j.js"),__vite__mapDeps([7,1,2,3,4,8]))),F=d.lazy(()=>m(()=>import("./PaymentSuccess-DyoEf3PO.js"),__vite__mapDeps([9,1,2,3,8]))),B=d.lazy(()=>m(()=>import("./PaymentFailed-D0XLSMeC.js"),__vite__mapDeps([10,1,2,3,8]))),q=d.lazy(()=>m(()=>import("./Dashboard-DjIgHx5O.js"),__vite__mapDeps([11,1,2,3]))),K=d.lazy(()=>m(()=>import("./Admin-C3UsA94l.js"),__vite__mapDeps([12,1,2,3]))),X=d.lazy(()=>m(()=>import("./Preview-DsxUDyQ3.js"),__vite__mapDeps([13,1,2,3]))),G=d.lazy(()=>m(()=>import("./NotFound-BjirMkDS.js"),__vite__mapDeps([14,1,2,3])));function E({children:s}){const{loading:o,user:l}=D(),i=L(),t=`${i.pathname}${i.search||""}`;return o?e.jsx("div",{className:"page-center text-white-50",children:"Loading..."}):l?s:e.jsx(T,{to:"/login",replace:!0,state:{from:t}})}function H(){return e.jsx(g,{})}function J(){return e.jsx(k,{children:e.jsx(R,{children:e.jsx("main",{id:"main-content",role:"main",tabIndex:"-1",children:e.jsx(x.Suspense,{fallback:e.jsx(z,{}),children:e.jsxs(O,{children:[e.jsx(c,{path:"/",element:e.jsx(H,{})}),e.jsx(c,{path:"/home",element:e.jsx(g,{})}),e.jsx(c,{path:"/dance",element:e.jsx(g,{})}),e.jsx(c,{path:"/preview",element:e.jsx(X,{})}),e.jsx(c,{path:"/login",element:e.jsx(V,{})}),e.jsx(c,{path:"/register",element:e.jsx(U,{})}),e.jsx(c,{path:"/checkout",element:e.jsx(E,{children:e.jsx($,{})})}),e.jsx(c,{path:"/payment-success",element:e.jsx(E,{children:e.jsx(F,{})})}),e.jsx(c,{path:"/payment-failed",element:e.jsx(E,{children:e.jsx(B,{})})}),e.jsx(c,{path:"/dashboard",element:e.jsx(E,{children:e.jsx(q,{})})}),e.jsx(c,{path:"/admin",element:e.jsx(K,{})}),e.jsx(c,{path:"*",element:e.jsx(G,{})})]})})})})})}A.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(J,{})}));export{m as _,y as a,D as u};
