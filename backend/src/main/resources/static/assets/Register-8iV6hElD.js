import{d as e,u as a,r as s,j as t,L as r}from"./vendor-BptZdHlD.js";import{u as l}from"./index-CO3XKiRA.js";import{s as i}from"./motion-Bf-FllcE.js";function n(){var n;const{register:c}=l(),m=e(),o=a(),d=new URLSearchParams(o.search).get("redirect"),p="string"==typeof(null==(n=o.state)?void 0:n.redirect)?o.state.redirect:"",u=d||p,[h,g]=s.useState(""),[x,N]=s.useState(""),[j,f]=s.useState(""),[v,w]=s.useState(""),[b,y]=s.useState(""),[C,S]=s.useState(""),[A,E]=s.useState(""),[M,F]=s.useState(!1),[O,R]=s.useState(!1),D=s.useMemo(()=>{if("undefined"==typeof window)return 10;const e=i(),a=window.matchMedia("(max-width: 768px)").matches;return e||a?10:25},[]),L=s.useMemo(()=>Array.from({length:D},()=>({left:100*Math.random()+"%",top:100*Math.random()+"%",delay:6*Math.random()+"s"})),[D]);return s.useEffect(()=>{var e;R(!0),"string"==typeof(null==(e=o.state)?void 0:e.email)&&N(o.state.email)},[o.state]),t.jsxs("div",{className:"cinematic-auth register-page",children:[t.jsxs("div",{className:"cinematic-bg",children:[t.jsx("div",{className:"bg-gradient register-gradient"}),t.jsx("div",{className:"particle-field",children:L.map((e,a)=>t.jsx("div",{className:"particle register-particle",style:{left:e.left,top:e.top,animationDelay:e.delay}},`register-p-${a}`))}),t.jsx("div",{className:"light-beam beam-1 register-beam"}),t.jsx("div",{className:"light-beam beam-2 register-beam"}),t.jsx("div",{className:"light-pulse"})]}),t.jsxs("div",{className:"cinematic-card register-card "+(O?"mounted":""),children:[t.jsx("div",{className:"card-glow register-glow"}),t.jsxs("div",{className:"auth-header",children:[t.jsx("h1",{className:"auth-main-title",children:"BEGIN YOUR JOURNEY"}),t.jsx("p",{className:"auth-subtitle",children:"Create Your AS DANCE Access"}),t.jsx("p",{className:"auth-micro-text",children:"Every performance starts with a single step."})]}),C&&t.jsx("div",{className:"auth-error",children:C}),A&&t.jsx("div",{className:"auth-success",children:A}),t.jsxs("form",{onSubmit:async function(e){if(e.preventDefault(),S(""),E(""),v===b){F(!0);try{const e=h.trim(),a=x.split("@")[0]||"AS DANCE User",s=e||a;await c(s,x,v),E("Account created! Redirecting...");const t=u?`/login?redirect=${encodeURIComponent(u)}`:"/login";setTimeout(()=>m(t,{state:{email:x}}),800)}catch(a){"EMAIL_NOT_ALLOWED"===(null==a?void 0:a.message)?S("This email is not allowed for access."):S((null==a?void 0:a.message)||"Register failed")}finally{F(!1)}}else S("Passwords do not match.")},className:"auth-form register-form",children:[t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{htmlFor:"reg-name",className:"form-label",children:["Full Name ",t.jsx("span",{className:"optional",children:"(Optional)"})]}),t.jsxs("div",{className:"input-wrapper",children:[t.jsx("span",{className:"input-icon",children:"N"}),t.jsx("input",{id:"reg-name",name:"fullName",type:"text",className:"form-input",placeholder:"Your name",value:h,onChange:e=>g(e.target.value),autoComplete:"name"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"reg-email",className:"form-label",children:"Email"}),t.jsxs("div",{className:"input-wrapper",children:[t.jsx("span",{className:"input-icon",children:"@"}),t.jsx("input",{id:"reg-email",name:"email",type:"email",className:"form-input",placeholder:"your@email.com",value:x,onChange:e=>N(e.target.value),required:!0,autoComplete:"email"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsxs("label",{htmlFor:"reg-phone",className:"form-label",children:["WhatsApp ",t.jsx("span",{className:"optional",children:"(Optional)"})]}),t.jsxs("div",{className:"input-wrapper",children:[t.jsx("span",{className:"input-icon",children:"#"}),t.jsx("input",{id:"reg-phone",name:"phone",type:"tel",className:"form-input",placeholder:"+91 88256 02356",value:j,onChange:e=>f(e.target.value),inputMode:"tel",autoComplete:"tel"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"reg-password",className:"form-label",children:"Password"}),t.jsxs("div",{className:"input-wrapper",children:[t.jsx("span",{className:"input-icon",children:"*"}),t.jsx("input",{id:"reg-password",name:"password",type:"password",className:"form-input",placeholder:"********",value:v,onChange:e=>w(e.target.value),required:!0,autoComplete:"new-password"})]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"reg-confirm",className:"form-label",children:"Confirm Password"}),t.jsxs("div",{className:"input-wrapper",children:[t.jsx("span",{className:"input-icon",children:"*"}),t.jsx("input",{id:"reg-confirm",name:"confirmPassword",type:"password",className:"form-input",placeholder:"********",value:b,onChange:e=>y(e.target.value),required:!0,autoComplete:"new-password"})]})]}),t.jsxs("button",{type:"submit",className:"auth-btn register-btn",disabled:M,children:[t.jsx("span",{className:"btn-text",children:M?"Creating Access...":"Create My Access"}),t.jsx("span",{className:"btn-glow"})]})]}),t.jsxs("div",{className:"auth-footer",children:[t.jsxs("p",{children:["Already have access? ",t.jsx(r,{to:"/login",className:"auth-link",children:"Enter the Stage"})]}),t.jsx(r,{to:"/",className:"back-link",children:"Back to Home"})]})]})]})}export{n as default};
