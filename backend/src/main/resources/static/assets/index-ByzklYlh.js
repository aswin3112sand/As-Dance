const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-U2LiZDSp.js","assets/vendor-Dl89K0mS.js","assets/ui-libs-wGVwhxMR.js","assets/ui-libs-CfkJyshZ.css","assets/icons-B58UmnIq.js","assets/Login-C0_JLdmU.js","assets/Register-v5FmmypJ.js","assets/Checkout-p0T3B0lr.js","assets/paymentStorage-CYG686oq.js","assets/PaymentSuccess-CN4lR3Bm.js","assets/PaymentFailed-C7bVCM59.js","assets/Dashboard-D0PbyNRw.js","assets/Admin-CenA7CLS.js","assets/Preview-Bm_Om_fw.js","assets/NotFound-vA1gJ6Z6.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,R as n,B as r,a as s,b as o,u as a,N as i,c}from"./vendor-Dl89K0mS.js";import"./ui-libs-wGVwhxMR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l={},d=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in l)return;l[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};function u(e,t={}){const n=e.startsWith("/")?e:`/${e}`,r={credentials:"include",...t},s=(r.method||"GET").toUpperCase();if(!["GET","HEAD","OPTIONS","TRACE"].includes(s)){const e=function(e){const t=document.cookie.match(new RegExp(`(?:^|; )${e}=([^;]*)`));return t?decodeURIComponent(t[1]):""}("XSRF-TOKEN");e&&(r.headers={...r.headers||{},"X-XSRF-TOKEN":e})}return fetch(n,r)}"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}),"caches"in window&&caches.open("as-dance-v1").catch(()=>{});const h=e.createContext(null);function m({children:n}){const[r,s]=e.useState(!0),[o,a]=e.useState(null);async function i(){try{const e=await u("/api/auth/me");if(!e.ok)throw new Error("not authed");const t=await e.json();a(t)}catch{a(null)}finally{s(!1)}}async function c(e,t){const n=await u("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await n.json().catch(()=>({}));if(!n.ok||!1===r.ok)throw new Error(r.message||"Login failed");a(r)}async function l(e,t,n){const r=await u("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e,email:t,password:n})}),s=await r.json().catch(()=>({}));if(!r.ok||!1===s.ok)throw new Error(s.message||"Register failed")}async function d(){await u("/api/auth/logout",{method:"POST"}),await i()}e.useEffect(()=>{i()},[]);const m=e.useMemo(()=>({loading:r,user:o,login:c,register:l,logout:d,refresh:i}),[r,o]);return t.jsx(h.Provider,{value:m,children:n})}function p(){return e.useContext(h)}const f=()=>t.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),j=n.lazy(()=>d(()=>import("./Home-U2LiZDSp.js"),__vite__mapDeps([0,1,2,3,4]))),x=n.lazy(()=>d(()=>import("./Login-C0_JLdmU.js"),__vite__mapDeps([5,1,2,3]))),_=n.lazy(()=>d(()=>import("./Register-v5FmmypJ.js"),__vite__mapDeps([6,1,2,3]))),y=n.lazy(()=>d(()=>import("./Checkout-p0T3B0lr.js"),__vite__mapDeps([7,1,2,3,4,8]))),E=n.lazy(()=>d(()=>import("./PaymentSuccess-CN4lR3Bm.js"),__vite__mapDeps([9,1,2,3,8]))),g=n.lazy(()=>d(()=>import("./PaymentFailed-C7bVCM59.js"),__vite__mapDeps([10,1,2,3,8]))),w=n.lazy(()=>d(()=>import("./Dashboard-D0PbyNRw.js"),__vite__mapDeps([11,1,2,3]))),v=n.lazy(()=>d(()=>import("./Admin-CenA7CLS.js"),__vite__mapDeps([12,1,2,3]))),P=n.lazy(()=>d(()=>import("./Preview-Bm_Om_fw.js"),__vite__mapDeps([13,1,2,3]))),O=n.lazy(()=>d(()=>import("./NotFound-vA1gJ6Z6.js"),__vite__mapDeps([14,1,2,3])));function b({children:e}){const{loading:n,user:r}=p(),s=a(),o=`${s.pathname}${s.search||""}`;return n?t.jsx("div",{className:"page-center text-white-50",children:"Loading..."}):r?e:t.jsx(i,{to:"/login",replace:!0,state:{from:o}})}function L(){return t.jsx(j,{})}function T(){const t=a();return e.useEffect(()=>{const e=Array.from(document.querySelectorAll(".reveal"));if(!e.length)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach(e=>e.classList.add("is-in"));const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-in"),t.unobserve(e.target))})},{threshold:.2,rootMargin:"0px 0px -10% 0px"});return e.forEach(e=>t.observe(e)),()=>t.disconnect()},[t.pathname]),null}function S(){return t.jsx(m,{children:t.jsxs(r,{children:[t.jsx(T,{}),t.jsx("main",{id:"main-content",role:"main",tabIndex:"-1",children:t.jsx(e.Suspense,{fallback:t.jsx(f,{}),children:t.jsxs(s,{children:[t.jsx(o,{path:"/",element:t.jsx(L,{})}),t.jsx(o,{path:"/home",element:t.jsx(j,{})}),t.jsx(o,{path:"/dance",element:t.jsx(j,{})}),t.jsx(o,{path:"/preview",element:t.jsx(P,{})}),t.jsx(o,{path:"/login",element:t.jsx(x,{})}),t.jsx(o,{path:"/register",element:t.jsx(_,{})}),t.jsx(o,{path:"/checkout",element:t.jsx(b,{children:t.jsx(y,{})})}),t.jsx(o,{path:"/payment-success",element:t.jsx(b,{children:t.jsx(E,{})})}),t.jsx(o,{path:"/payment-failed",element:t.jsx(b,{children:t.jsx(g,{})})}),t.jsx(o,{path:"/dashboard",element:t.jsx(b,{children:t.jsx(w,{})})}),t.jsx(o,{path:"/admin",element:t.jsx(v,{})}),t.jsx(o,{path:"*",element:t.jsx(O,{})})]})})})]})})}c.createRoot(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(S,{})}));export{d as _,u as a,p as u};
