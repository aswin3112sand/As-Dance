const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CUKn8ciG.js","assets/vendor-Dl89K0mS.js","assets/ui-libs-wGVwhxMR.js","assets/ui-libs-CfkJyshZ.css","assets/icons-B58UmnIq.js","assets/Login-BWGEuIs5.js","assets/Register-Cc4O7Bhy.js","assets/Checkout-CQfw0R7x.js","assets/paymentStorage-CYG686oq.js","assets/PaymentSuccess-CO0ssyJk.js","assets/PaymentFailed-DCrOzale.js","assets/Dashboard-CJvRx5OR.js","assets/Admin-DN6lPnA8.js","assets/Preview-Pk21ATX_.js","assets/NotFound-vA1gJ6Z6.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,R as n,B as s,a as r,b as o,u as a,N as i,c}from"./vendor-Dl89K0mS.js";import"./ui-libs-wGVwhxMR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const l={},d=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in l)return;l[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};function u(e,t={}){const n=e.startsWith("/")?e:`/${e}`,s={credentials:"include",...t},r=(s.method||"GET").toUpperCase();if(!["GET","HEAD","OPTIONS","TRACE"].includes(r)){const e=function(e){const t=document.cookie.match(new RegExp(`(?:^|; )${e}=([^;]*)`));return t?decodeURIComponent(t[1]):""}("XSRF-TOKEN");e&&(s.headers={...s.headers||{},"X-XSRF-TOKEN":e})}return fetch(n,s)}"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}),"caches"in window&&caches.open("as-dance-v1").catch(()=>{});const h=e.createContext(null);function m({children:n}){const[s,r]=e.useState(!0),[o,a]=e.useState(null);async function i(){try{const e=await u("/api/auth/me");if(!e.ok)throw new Error("not authed");const t=await e.json();a(t)}catch{a(null)}finally{r(!1)}}async function c(e,t){const n=await u("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),s=await n.json().catch(()=>({}));if(!n.ok||!1===s.ok)throw new Error(s.message||"Login failed");a(s)}async function l(e,t,n){const s=await u("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e,email:t,password:n})}),r=await s.json().catch(()=>({}));if(!s.ok||!1===r.ok)throw new Error(r.message||"Register failed")}async function d(){await u("/api/auth/logout",{method:"POST"}),await i()}e.useEffect(()=>{i()},[]);const m=e.useMemo(()=>({loading:s,user:o,login:c,register:l,logout:d,refresh:i}),[s,o]);return t.jsx(h.Provider,{value:m,children:n})}function p(){return e.useContext(h)}const j=()=>t.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-black",children:t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),f=n.lazy(()=>d(()=>import("./Home-CUKn8ciG.js"),__vite__mapDeps([0,1,2,3,4]))),x=n.lazy(()=>d(()=>import("./Login-BWGEuIs5.js"),__vite__mapDeps([5,1,2,3]))),_=n.lazy(()=>d(()=>import("./Register-Cc4O7Bhy.js"),__vite__mapDeps([6,1,2,3]))),y=n.lazy(()=>d(()=>import("./Checkout-CQfw0R7x.js"),__vite__mapDeps([7,1,2,3,4,8]))),E=n.lazy(()=>d(()=>import("./PaymentSuccess-CO0ssyJk.js"),__vite__mapDeps([9,1,2,3,8]))),g=n.lazy(()=>d(()=>import("./PaymentFailed-DCrOzale.js"),__vite__mapDeps([10,1,2,3,8]))),w=n.lazy(()=>d(()=>import("./Dashboard-CJvRx5OR.js"),__vite__mapDeps([11,1,2,3]))),P=n.lazy(()=>d(()=>import("./Admin-DN6lPnA8.js"),__vite__mapDeps([12,1,2,3]))),v=n.lazy(()=>d(()=>import("./Preview-Pk21ATX_.js"),__vite__mapDeps([13,1,2,3]))),O=n.lazy(()=>d(()=>import("./NotFound-vA1gJ6Z6.js"),__vite__mapDeps([14,1,2,3])));function T({children:e}){const{loading:n,user:s}=p(),r=a(),o=`${r.pathname}${r.search||""}`;return n?t.jsx("div",{className:"page-center text-white-50",children:"Loading..."}):s?e:t.jsx(i,{to:"/login",replace:!0,state:{from:o}})}function L(){return t.jsx(f,{})}function b(){return t.jsx(m,{children:t.jsx(s,{children:t.jsx("main",{id:"main-content",role:"main",tabIndex:"-1",children:t.jsx(e.Suspense,{fallback:t.jsx(j,{}),children:t.jsxs(r,{children:[t.jsx(o,{path:"/",element:t.jsx(L,{})}),t.jsx(o,{path:"/home",element:t.jsx(f,{})}),t.jsx(o,{path:"/dance",element:t.jsx(f,{})}),t.jsx(o,{path:"/preview",element:t.jsx(v,{})}),t.jsx(o,{path:"/login",element:t.jsx(x,{})}),t.jsx(o,{path:"/register",element:t.jsx(_,{})}),t.jsx(o,{path:"/checkout",element:t.jsx(T,{children:t.jsx(y,{})})}),t.jsx(o,{path:"/payment-success",element:t.jsx(T,{children:t.jsx(E,{})})}),t.jsx(o,{path:"/payment-failed",element:t.jsx(T,{children:t.jsx(g,{})})}),t.jsx(o,{path:"/dashboard",element:t.jsx(T,{children:t.jsx(w,{})})}),t.jsx(o,{path:"/admin",element:t.jsx(P,{})}),t.jsx(o,{path:"*",element:t.jsx(O,{})})]})})})})})}c.createRoot(document.getElementById("root")).render(t.jsx(n.StrictMode,{children:t.jsx(b,{})}));export{d as _,u as a,p as u};
