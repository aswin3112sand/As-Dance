import{d as e,u as a,r as s,j as r,L as l}from"./vendor-DGokejAA.js";import{u as t}from"./index-DpB0waGD.js";import"./ui-libs-BEsYCcWk.js";function i(){var i;const{register:n}=t(),c=e(),m=a(),o=new URLSearchParams(m.search).get("redirect"),d="string"==typeof(null==(i=m.state)?void 0:i.redirect)?m.state.redirect:"",p=o||d,[u,h]=s.useState(""),[g,N]=s.useState(""),[x,j]=s.useState(""),[v,f]=s.useState(""),[b,w]=s.useState(""),[y,C]=s.useState(""),[S,A]=s.useState(""),[E,F]=s.useState(!1),[M,O]=s.useState(!1);return s.useEffect(()=>{var e;O(!0),"string"==typeof(null==(e=m.state)?void 0:e.email)&&N(m.state.email)},[m.state]),r.jsxs("div",{className:"cinematic-auth register-page",children:[r.jsxs("div",{className:"cinematic-bg",children:[r.jsx("div",{className:"bg-gradient register-gradient"}),r.jsx("div",{className:"particle-field",children:Array.from({length:25}).map((e,a)=>r.jsx("div",{className:"particle register-particle",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:6*Math.random()+"s"}},`register-p-${a}`))}),r.jsx("div",{className:"light-beam beam-1 register-beam"}),r.jsx("div",{className:"light-beam beam-2 register-beam"}),r.jsx("div",{className:"light-pulse"})]}),r.jsxs("div",{className:"cinematic-card register-card "+(M?"mounted":""),children:[r.jsx("div",{className:"card-glow register-glow"}),r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{className:"auth-main-title",children:"BEGIN YOUR JOURNEY"}),r.jsx("p",{className:"auth-subtitle",children:"Create Your AS DANCE Access"}),r.jsx("p",{className:"auth-micro-text",children:"Every performance starts with a single step."})]}),y&&r.jsx("div",{className:"auth-error",children:y}),S&&r.jsx("div",{className:"auth-success",children:S}),r.jsxs("form",{onSubmit:async function(e){if(e.preventDefault(),C(""),A(""),v===b){F(!0);try{const e=u.trim(),a=g.split("@")[0]||"AS DANCE User",s=e||a;await n(s,g,v),A("Account created! Redirecting...");const r=p?`/login?redirect=${encodeURIComponent(p)}`:"/login";setTimeout(()=>c(r,{state:{email:g}}),800)}catch(a){"EMAIL_NOT_ALLOWED"===(null==a?void 0:a.message)?C("This email is not allowed for access."):C((null==a?void 0:a.message)||"Register failed")}finally{F(!1)}}else C("Passwords do not match.")},className:"auth-form register-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"reg-name",className:"form-label",children:["Full Name ",r.jsx("span",{className:"optional",children:"(Optional)"})]}),r.jsxs("div",{className:"input-wrapper",children:[r.jsx("span",{className:"input-icon",children:"N"}),r.jsx("input",{id:"reg-name",name:"fullName",type:"text",className:"form-input",placeholder:"Your name",value:u,onChange:e=>h(e.target.value),autoComplete:"name"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"reg-email",className:"form-label",children:"Email"}),r.jsxs("div",{className:"input-wrapper",children:[r.jsx("span",{className:"input-icon",children:"@"}),r.jsx("input",{id:"reg-email",name:"email",type:"email",className:"form-input",placeholder:"your@email.com",value:g,onChange:e=>N(e.target.value),required:!0,autoComplete:"email"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"reg-phone",className:"form-label",children:["WhatsApp ",r.jsx("span",{className:"optional",children:"(Optional)"})]}),r.jsxs("div",{className:"input-wrapper",children:[r.jsx("span",{className:"input-icon",children:"#"}),r.jsx("input",{id:"reg-phone",name:"phone",type:"tel",className:"form-input",placeholder:"+91 88256 02356",value:x,onChange:e=>j(e.target.value),inputMode:"tel",autoComplete:"tel"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"reg-password",className:"form-label",children:"Password"}),r.jsxs("div",{className:"input-wrapper",children:[r.jsx("span",{className:"input-icon",children:"*"}),r.jsx("input",{id:"reg-password",name:"password",type:"password",className:"form-input",placeholder:"********",value:v,onChange:e=>f(e.target.value),required:!0,autoComplete:"new-password"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"reg-confirm",className:"form-label",children:"Confirm Password"}),r.jsxs("div",{className:"input-wrapper",children:[r.jsx("span",{className:"input-icon",children:"*"}),r.jsx("input",{id:"reg-confirm",name:"confirmPassword",type:"password",className:"form-input",placeholder:"********",value:b,onChange:e=>w(e.target.value),required:!0,autoComplete:"new-password"})]})]}),r.jsxs("button",{type:"submit",className:"auth-btn register-btn",disabled:E,children:[r.jsx("span",{className:"btn-text",children:E?"Creating Access...":"Create My Access"}),r.jsx("span",{className:"btn-glow"})]})]}),r.jsxs("div",{className:"auth-footer",children:[r.jsxs("p",{children:["Already have access? ",r.jsx(l,{to:"/login",className:"auth-link",children:"Enter the Stage"})]}),r.jsx(l,{to:"/",className:"back-link",children:"Back to Home"})]})]})]})}export{i as default};
